@page "/home"
@using Frontend.Services
@inject TalentoService TalentoService
@inject PropostaTrabalhoService PropostaTrabalhoService

<PageTitle>Início</PageTitle>

<div style="max-width: 600px; margin: 50px auto; font-family: Arial, sans-serif">
    <img src="Logo_ES2-removedbg.png" alt="Logo" height="200" width="200" style="display: block; margin: 0 auto;"/>

    <h1 style="color: #512BD4; text-align: center; margin-bottom: 20px;">
        Bem-vindo à Plataforma de Gestão de Talentos IT
    </h1>
    
    <p style="text-align: center; color: #333;">
        Aqui pode gerir perfis de talentos, habilidades, clientes e propostas de trabalho de forma simples e eficiente.
    </p>
</div>

<div>
    <section class="d-flex justify-content-center">
        <div class="card shadow border-0" style="width: 350px;">
            <div class="card-body">
                <h4 class="card-title text-primary mb-4">Resumo</h4>
                <div class="d-flex align-items-center mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#512BD4" class="me-2" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <span class="fw-semibold">Total de talentos:</span>
                    <span class="ms-auto badge bg-primary rounded-pill">@totalTalentos</span>
                </div>
                <div class="d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#512BD4" class="me-2" viewBox="0 0 24 24">
                        <path d="M21 10h-3V7a1 1 0 0 0-2 0v3H9V7a1 1 0 0 0-2 0v3H4a1 1 0 0 0 0 2h3v3a1 1 0 0 0 2 0v-3h7v3a1 1 0 0 0 2 0v-3h3a1 1 0 0 0 0-2z"/>
                    </svg>
                    <span class="fw-semibold">Total de propostas:</span>
                    <span class="ms-auto badge bg-primary rounded-pill">@totalPropostas</span>
                </div>
            </div>
        </div>
    </section>
</div>
@code {
    private int totalTalentos = 0;
    private int totalPropostas = 0;

    protected override async Task OnInitializedAsync()
    {
        var talentos = await TalentoService.GetAllTalentosAsync();
        if (talentos != null)
        {
            totalTalentos = talentos.Count;
        }

        var propostas = await PropostaTrabalhoService.GetAllPropostasAsync();
        if (propostas != null)
        {
            totalPropostas = propostas.Count;
        }
    }
}
